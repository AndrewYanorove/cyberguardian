{% extends "base.html" %}

{% block content %}

<style>
    .features-buttons-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        align-items: stretch;
        width: 100%;
    }

    .feature-card {
        display: flex;
        flex-direction: column;
        min-height: 350px;
        height: auto;
        width: 100%;
        max-width: 100%;
    }

    .feature-card h3 {
        flex-shrink: 0;
        height: 60px;
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        text-align: center !important;
        justify-content: center;
    }

    .feature-card p {
        flex: 1;
        margin-bottom: 1rem;
        display: flex;
        align-items: flex-start;
    }

    .feature-card p {
        text-align: center !important;
    }

    .feature-card .feature-icon {
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        margin-left: auto;
        margin-right: auto;
    }

    /* ФИКС ДЛЯ КНОПОК - УБИРАЕМ ОВАЛ И ДЕЛАЕМ ВЫШЕ */
    .feature-card .feature-btn {
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        text-align: center !important;
        margin-top: auto !important;
        margin-bottom: 1rem !important;
        padding: 1rem 1.5rem !important;
        border-radius: 12px !important;
        text-decoration: none !important;
        transition: all 0.3s ease !important;
        position: relative;
        overflow: hidden;
        border: 2px solid var(--cyber-primary);
        background: transparent;
        color: var(--cyber-primary);
        font-weight: 700;
        font-size: 1.1rem;
        width: calc(100% - 2rem);
        margin-left: auto !important;
        margin-right: auto !important;
        min-height: 60px !important;
        line-height: 1.2 !important;
    }

    .feature-card .feature-btn-danger {
        border-color: var(--cyber-danger);
        color: var(--cyber-danger);
    }

    .feature-card .feature-btn:hover {
        background: var(--cyber-primary);
        color: #000;
        box-shadow: 0 8px 25px rgba(0, 168, 255, 0.3);
        text-decoration: none;
        transform: translateY(-2px);
    }

    .feature-card .feature-btn-danger:hover {
        background: var(--cyber-danger);
        color: #000;
        box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        transform: translateY(-2px);
    }

    /* Убираем все анимации овала */
    .feature-card .feature-btn::before,
    .feature-card .feature-btn-danger::before {
        display: none !important;
    }

    /* Адаптивность */
    @media (max-width: 1200px) {
        .feature-card {
            flex: 0 0 calc(33.333% - 20px);
            height: 370px;
        }
    }

    @media (max-width: 992px) {
        .feature-card {
            flex: 0 0 calc(50% - 20px);
            height: 360px;
        }
    }

    @media (max-width: 768px) {
        .feature-card {
            height: 340px;
        }
    }

    @media (max-width: 576px) {
        .feature-card {
            flex: 0 0 100%;
            height: 320px;
            max-width: 100%;
        }

        @media (max-width: 1200px) {
            .features-buttons-container {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        @media (max-width: 992px) {
            .features-buttons-container {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 15px;
            }

            .feature-card {
                min-height: 320px;
            }
        }

        @media (max-width: 768px) {
            .features-buttons-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .feature-card {
                min-height: 300px;
                margin: 0 10px;
            }
        }

        @media (max-width: 576px) {
            .features-buttons-container {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .feature-card {
                min-height: 280px;
                margin: 0 5px;
            }
        }

        .container-max {
            width: 100%;
            max-width: 100%;
            padding-left: 15px;
            padding-right: 15px;
            margin-left: auto;
            margin-right: auto;
        }
    }

    /* Мобильная версия - исправление слетающих кнопок */
    @media (max-width: 768px) {
        .features-buttons-container {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            gap: 15px !important;
            width: 100% !important;
        }

        .feature-card {
            width: 100% !important;
            max-width: 400px !important;
            min-height: 280px !important;
            margin: 0 auto !important;
            display: flex !important;
            flex-direction: column !important;
        }

        .feature-card .feature-btn {
            margin-top: auto !important;
            width: 90% !important;
            margin-left: auto !important;
            margin-right: auto !important;
            margin-bottom: 1rem !important;
            min-height: 44px !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
        }

        .feature-card .feature-icon,
        .feature-card h3,
        .feature-card p {
            text-align: center !important;
            width: 100% !important;
        }

        .feature-card .feature-icon {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            margin: 0 auto !important;
        }
    }

    /* Для очень маленьких экранов */
    @media (max-width: 480px) {
        .features-buttons-container {
            gap: 12px !important;
            padding: 0 10px !important;
        }

        .feature-card {
            min-height: 260px !important;
            max-width: 100% !important;
        }

        .feature-card .feature-btn {
            width: 95% !important;
            min-height: 42px !important;
            font-size: 0.9rem !important;
        }

        .feature-card h3 {
            font-size: 1.1rem !important;
            margin-bottom: 0.8rem !important;
        }

        .feature-card p {
            font-size: 0.9rem !important;
            margin-bottom: 0.8rem !important;
        }
    }

    /* Дополнительный фикс для iOS Safari */
    @supports (-webkit-touch-callout: none) {
        .feature-card {
            min-height: 300px !important;
        }
    }

    /* Фикс для viewport на мобильных */
    @media (max-width: 768px) {
        .container-max {
            padding-left: 10px !important;
            padding-right: 10px !important;
        }

        .section-spacing {
            padding: 2rem 0 !important;
        }
    }
</style>

<head>
    <link rel="stylesheet" href="static/css/main.css">
</head>

<!-- Hero Section -->
<section class="cyber-hero">
    <div class="container-max">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="cyber-title display-3 mb-4 fade-in-up">
                    <i class="bi bi-shield-shaded me-3"></i><b>Ваш цифровой щит в мире кибербезопасности</b>
                </h1>
                <p class="cyber-lead mb-4 fade-in-up" style="animation-delay: 0.1s;">
                    Защищайся, учись и исследуй с помощью современных технологий.
                    Стань киберзащитником уже сегодня и получи востребованные навыки в области информационной
                    безопасности.
                </p>
                <div class="d-flex flex-wrap gap-3 mb-4 fade-in-up" style="animation-delay: 0.2s;">
                    <a href="{{ url_for('education.education_home') }}" class="btn-cyber btn-lg">
                        <i class="bi bi-book me-2"></i>Начать обучение
                    </a>
                    <a href="{{ url_for('scanner.scanner_dashboard') }}" class="btn-cyber-outline btn-lg">
                        <i class="bi bi-shield-check me-2"></i>Проверить безопасность
                    </a>
                    <a href="{{ url_for('ddos.ddos_simulator') }}" class="btn-cyber-danger btn-lg">
                        <i class="bi bi-lightning-charge me-2"></i>DDoS Simulator
                    </a>
                </div>

                <!-- Quick Stats -->
                <div class="stats-grid fade-in-up" style="animation-delay: 0.3s;">
                    <div class="stat-card">
                        <span class="stat-number">8</span>
                        <span class="stat-label">Курсов доступно</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">50+</span>
                        <span class="stat-label">Алгоритмов шифрования</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">24/7</span>
                        <span class="stat-label">ИИ-помощник доступен</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">100%</span>
                        <span class="stat-label">Безопасная учебная среда</span>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 text-center">
                <i class="bi bi-shield-lock float-animation" style="font-size: 8rem; color: var(--cyber-primary); opacity: 0.9;"></i>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="section-spacing">
    <div class="container-max">
        <h2 class="section-title cyber-title-primary fade-in-up">
            <i class="bi bi-stars me-2"></i>Возможности платформы
        </h2>

        <!-- Контейнер для всех кнопок в одной строке -->
        <div class="features-buttons-container fade-in-up">
            <!-- Первая строка фич -->
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="bi bi-book"></i>
                </div>
                <h3 class="cyber-text-bright mb-3">Интерактивное обучение</h3>
                <p class="cyber-text mb-4">Уроки по кибербезопасности, тесты и симуляции атак для полного погружения в тему.</p>
                <a href="{{ url_for('education.education_home') }}" class="feature-btn">
                    Изучать
                </a>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <i class="bi bi-key"></i>
                </div>
                <h3 class="cyber-text-bright mb-3">Генератор паролей</h3>
                <p class="cyber-text mb-4">Создание и проверка надежных паролей для защиты ваших учетных записей.</p>
                <a href="{{ url_for('passwords.password_generator') }}" class="feature-btn">
                    Использовать
                </a>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <i class="bi bi-lock"></i>
                </div>
                <h3 class="cyber-text-bright mb-3">Шифрование данных</h3>
                <p class="cyber-text mb-4">Шифрование текстов и файлов с использованием современных алгоритмов.</p>
                <a href="{{ url_for('encryption.encryption_tools') }}" class="feature-btn">
                    Шифровать
                </a>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <i class="bi bi-robot"></i>
                </div>
                <h3 class="cyber-text-bright mb-3">ИИ-помощник</h3>
                <p class="cyber-text mb-4">Ваш персональный консультант по безопасности, доступный 24/7.</p>
                <a href="{{ url_for('ai.ai_chat') }}" class="feature-btn">
                    Спросить
                </a>
            </div>

            <!-- Вторая строка фич -->
            <div class="feature-card">
                <div class="feature-icon" style="color: var(--cyber-warning);">
                    <i class="bi bi-shield-exclamation"></i>
                </div>
                <h3 class="cyber-text-bright mb-3">Мониторинг угроз</h3>
                <p class="cyber-text mb-4">Отслеживание киберугроз в реальном времени и получение уведомлений.</p>
                <a href="{{ url_for('threats.threat_dashboard') }}" class="feature-btn">
                    Мониторить
                </a>
            </div>

            <div class="feature-card">
                <div class="feature-icon" style="color: var(--cyber-success);">
                    <i class="bi bi-shield-check"></i>
                </div>
                <h3 class="cyber-text-bright mb-3">Сканер безопасности</h3>
                <p class="cyber-text mb-4">Комплексная проверка системы на уязвимости и проблемы безопасности.</p>
                <a href="{{ url_for('scanner.scanner_dashboard') }}" class="feature-btn">
                    Сканировать
                </a>
            </div>

            <div class="feature-card">
                <div class="feature-icon" style="color: var(--cyber-info);">
                    <i class="bi bi-joystick"></i>
                </div>
                <h3 class="cyber-text-bright mb-3">Кибер-тренировка и развлечения</h3>
                <p class="cyber-text mb-4">Обучение через увлекательные игры, квизы и практические задания.</p>
                <a href="{{ url_for('games.games_dashboard') }}" class="feature-btn">
                    Играть
                </a>
            </div>

            <div class="feature-card" style="border-color: var(--cyber-danger);">
                <div class="feature-icon" style="color: var(--cyber-danger);">
                    <i class="bi bi-lightning-charge"></i>
                </div>
                <h3 class="cyber-text-bright mb-3">DDoS Simulator</h3>
                <p class="cyber-text mb-4">Изучение механизмов DDoS атак и методов защиты в безопасной среде.</p>
                <a href="{{ url_for('ddos.ddos_simulator') }}" class="feature-btn feature-btn-danger">
                    Исследовать
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Final CTA -->
<section class="section-spacing">
    <div class="container-max">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="cyber-card text-center">
                    <h2 class="cyber-title-primary mb-3">Готов стать киберзащитником?</h2>
                    <p class="cyber-lead mb-4">
                        Присоединяйся к сообществу CyberGuardian и прокачай свои навыки кибер-безопасности
                    </p>

                    <div class="d-flex flex-wrap gap-3 justify-content-center">
                        <a href="{{ url_for('auth.register') }}" class="btn-cyber btn-lg">
                            <i class="bi bi-person-plus me-2"></i>Присоединиться
                        </a>
                        <a href="{{ url_for('education.education_home') }}" class="btn-cyber-outline btn-lg">
                            <i class="bi bi-play-circle me-2"></i>Начать обучение
                        </a>
                        <a href="{{ url_for('ddos.ddos_simulator') }}" class="btn-cyber-danger btn-lg">
                            <i class="bi bi-lightning me-2"></i>DDoS Simulator
                        </a>
                    </div>

                    <div class="mt-4">
                        <p class="cyber-subtext">
                            Уже присоединились к нам?
                            <a href="{{ url_for('auth.login') }}" class="cyber-text-bright" style="text-decoration: none;">Войдите в аккаунт</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Additional Stats -->
<section class="section-spacing" style="background: var(--cyber-bg-card-dark);">
    <div class="container-max">
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="stat-card">
                    <span class="stat-number">3</span>
                    <span class="stat-label">Игры доступно</span>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="stat-card">
                    <span class="stat-number">500+</span>
                    <span class="stat-label">Практических заданий</span>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="stat-card">
                    <span class="stat-number">15</span>
                    <span class="stat-label">Экспертов индустрии</span>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="stat-card">
                    <span class="stat-number">24/7</span>
                    <span class="stat-label">Поддержка</span>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Additional animations for index page
    document.addEventListener('DOMContentLoaded', function () {
        // Floating animation for hero icon
        const heroIcon = document.querySelector('.float-animation');
        if (heroIcon) {
            heroIcon.style.animation = 'float 6s ease-in-out infinite';
        }

        // Staggered animation for feature cards
        const featureCards = document.querySelectorAll('.feature-card');
        featureCards.forEach((card, index) => {
            card.style.animationDelay = `${0.1 + (index * 0.1)}s`;
        });

        // Parallax effect for hero section
        window.addEventListener('scroll', function () {
            const scrolled = window.pageYOffset;
            const hero = document.querySelector('.cyber-hero');
            if (hero) {
                hero.style.backgroundPositionY = `${scrolled * 0.5}px`;
            }
        });

        // Interactive stats counter
        const statNumbers = document.querySelectorAll('.stat-number');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const statNumber = entry.target;
                    if (!statNumber.classList.contains('animated')) {
                        statNumber.classList.add('animated');
                        const target = parseInt(statNumber.textContent);
                        const duration = 2000;
                        const step = target / (duration / 16);
                        let current = 0;

                        const timer = setInterval(() => {
                            current += step;
                            if (current >= target) {
                                clearInterval(timer);
                                statNumber.textContent = target + (statNumber.textContent.includes('+') ? '+' : '');
                            } else {
                                statNumber.textContent = Math.floor(current) + (statNumber.textContent.includes('+') ? '+' : '');
                            }
                        }, 16);
                    }
                }
            });
        }, { threshold: 0.5 });

        statNumbers.forEach(stat => {
            observer.observe(stat);
        });
    });
</script>
{% endblock %}