# TODO: Доработка админ-панели

## Проблемы, которые нужно исправить:

### 1. ❌ Критическая ошибка в модели User
- Поле `is_active` используется как column И как property (конфликт Flask-Login)
- Нужно переименовать column в `user_is_active`

### 2. ❌ Отсутствует модуль admin
- Нет директории admin/
- Нет admin/routes.py
- Админ-панель встроена в app.py (плохая архитектура)

### 3. ❌ Не работает управление пользователями
- API endpoints для управления пользователями требуют тестирования
- Нужно проверить CRUD операции

### 4. ❌ Проблемы с безопасностью
- Нет proper проверки ролей
- Нужно улучшить CSRF защиту

## План исправления:

### Шаг 1: Исправить модель User
- [ ] Переименовать `is_active` column в `user_is_active`
- [ ] Обновить все ссылки на это поле
- [ ] Протестировать Flask-Login

### Шаг 2: Создать модуль admin
- [ ] Создать admin/__init__.py
- [ ] Создать admin/routes.py
- [ ] Перенести админ функциональность из app.py
- [ ] Обновить app.py для импорта admin blueprint

### Шаг 3: Улучшить безопасность
- [ ] Добавить proper role-based access control
- [ ] Улучшить CSRF токены
- [ ] Добавить аудит действий администратора

### Шаг 4: Тестирование
- [ ] Протестировать все API endpoints
- [ ] Проверить UI админ-панели
- [ ] Протестировать CRUD операции

### Шаг 5: Финальная проверка
- [ ] Запустить сервер
- [ ] Проверить все функции
- [ ] Создать документацию
